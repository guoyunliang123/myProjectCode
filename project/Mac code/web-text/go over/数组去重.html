<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    // ES6 set
    // const array = [1, 2, 3, 2, 1, 4, 2, '1', NaN, NaN, undefined, undefined];

    /* function unique(array) {
      return Array.from(new Set(array));
    }
    console.log(unique(array)); */

    /* function unique(array) {
      return [...new Set(array)];
    }
    console.log(unique(array)); */

    /* const unique = (a) => [...new Set(a)];
    console.log(unique(array)); */

    /* function unique(arr) {
      const seen = new Map();
      return arr.filter((a) => !seen.has(a) && seen.set(a, 1));
    }
    console.log(unique(array)); */

    // 双层循环
    function unique(array) {
      // res用来存储结果
      const res = [];
      for (var i = 0; i < array.length; i++) {
        for (var j = 0; j < res.length; j++) {
          if (array[i] === res[j]) {
            break;
          }
        } // 如果array[i]是唯一的，那么执行完循环，j等于resLen 
        if (j === res.length) {
          res.push(array[i])
        }
      }
      return res;
    }
    console.log(unique([1, '1', 2, 3, 1, '2', '1'])); // [1, "1", 2, 3, '2']

    // indexOf
    /* var array = [1, 1, '1'];

    function unique(array) {
      var res = [];
      for (var i = 0, len = array.length; i < len; i++) {
        var current = array[i];
        if (res.indexOf(current) === -1) {
          res.push(current)
        }
      }
      return res;
    }
    console.log(unique(array)); */

    // 排序去重
    /* var array = ['1', 1, '2', 1, '1', 2, 2, '2', '2', 3];

    function unique(array) {
      var res = [];
      var sortedArray = array.concat().sort();
      var seen;
      for (var i = 0, len = sortedArray.length; i < len; i++) {
        // 如果是第一个元素或者相邻的元素不相同 
        if (!i || seen !== sortedArray[i]) {
          res.push(sortedArray[i])
        }
        seen = sortedArray[i];
      }
      return res;
    }
    console.log(unique(array)); */

    /* var array1 = [1, 2, '1', 2, '1', 1];
    var array2 = [1, 1, '1', 2, '1', 2];

    // 第一版
    function unique(array, isSorted) {
      var res = [];
      var seen = [];

      for (var i = 0, len = array.length; i < len; i++) {
        var value = array[i];
        if (isSorted) {
          if (!i || seen !== value) {
            res.push(value)
          }
          seen = value;
        } else if (res.indexOf(value) === -1) {
          res.push(value);
        }
      }
      return res;
    }
    console.log(unique(array1)); // [1, 2, "1" ] 
    console.log(unique(array2, true)); // [1, "1" , 2] */

    /* var array3 = [1, '1', 1, 'a', 'A', 2, '1', 2];

    // 第二版
    // iteratee 英文释义：迭代 重复
    function unique(array, isSorted, iteratee) {
      var res = [];
      var seen = [];

      for (var i = 0, len = array.length; i < len; i++) {
        var value = array[i];
        var computed = iteratee ? iteratee(value, i,
          array) : value;
        if (isSorted) {
          if (!i || seen !== value) {
            res.push(value)
          }
          seen = value;
        } else if (iteratee) {
          if (seen.indexOf(computed) === -1) {
            seen.push(computed);
            res.push(value);
          }
        } else if (res.indexOf(value) === -1) {
          res.push(value);
        }
      }
      return res;
    }
    console.log(unique(array3, false, function (item) {
      return typeof item == 'string' ?
        item.toLowerCase() : item
    })); // [1, "1", "a" , 2] */

    const arr = [1, 2, 3, 2, 1, 3];
    const resultArr = [...new Set(arr)];
    console.log(resultArr);
  </script>
</body>

</html>